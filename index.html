<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashbook - Expense Manager</title>
    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="icon" type="image/png"
        href="https://raw.githubusercontent.com/dmdipanshu/vvvvv/3157c5fac2907e800f5bc23be4843864e53dff03/1767530293761.jpg">
</head>

<body>
<div class="app-container">

    <!-- ================= AUTH MODAL ================= -->
    <div id="auth-modal" class="modal show" style="z-index:2000;">
        <div class="modal-content" style="max-width:400px;">
            <div class="modal-header">
                <h3 id="auth-title">Login</h3>
            </div>

            <form id="auth-form">
                <div class="form-control">
                    <label>Username</label>
                    <input type="text" id="auth-username" required>
                </div>
                <div class="form-control">
                    <label>Password</label>
                    <input type="password" id="auth-password" required>
                </div>
                <button class="btn" id="auth-submit-btn">Login</button>
            </form>

            <!-- âœ… RESTORED REGISTRATION UI -->
            <p style="text-align:center;margin-top:16px;">
                <span id="auth-switch-text">Don't have an account?</span>
                <a href="#" id="auth-switch-btn"
                    style="color:var(--primary-color);font-weight:600;">Register</a>
            </p>
        </div>
    </div>

    <!-- ================= LOADING ================= -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <!-- ================= HOME VIEW ================= -->
    <div id="view-home" class="view-section active">
        <header class="home-header">
            <div class="business-selector" id="business-selector-btn">
                <img src="https://raw.githubusercontent.com/dmdipanshu/vvvvv/3157c5fac2907e800f5bc23be4843864e53dff03/1767530293761.jpg"
                     alt="Logo" style="height:40px;margin-right:12px;border-radius:50%;">
                <div class="business-icon" style="display:none;">
                    <i class="fa-regular fa-building"></i>
                </div>
                <div class="business-info">
                    <span class="business-name" id="current-business-name">October</span>
                    <span class="tap-hint">Tap to switch business <i class="fa-solid fa-chevron-down"></i></span>
                </div>
            </div>

            <div class="home-search-row">
                <h3>Your Books</h3>
                <div class="home-actions">
                    <div class="search-wrapper" id="search-wrapper" style="display:none;margin-right:8px;">
                        <input type="text" id="book-search-input" placeholder="Search books...">
                    </div>
                    <button class="icon-btn" id="search-toggle-btn">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
            </div>
        </header>

        <div id="books-list" class="books-list"></div>

        <button id="fab-add-book" class="fab-extended">
            <i class="fa-solid fa-plus"></i> ADD NEW BOOK
        </button>
    </div>

    <!-- ================= STATS VIEW ================= -->
    <div id="view-stats" class="view-section">
        <header class="main-header">
            <div class="header-top">
                <button class="icon-btn back-btn" id="back-from-stats">
                    <i class="fa-solid fa-arrow-left"></i>
                </button>
                <div class="header-title">
                    <h1>Analytics</h1>
                </div>
            </div>
        </header>

        <div class="content-container">
            <div class="card">
                <h3>Income vs Expense</h3>
                <div style="height:250px;position:relative;">
                    <canvas id="pie-chart"></canvas>
                </div>
            </div>

            <div class="card">
                <h3>Category Spending</h3>
                <div style="height:250px;position:relative;">
                    <canvas id="bar-chart"></canvas>
                </div>
            </div>

            <div class="card">
                <h3>Budget Limits</h3>
                <div id="budget-progress-container">
                    <p class="empty-state">
                        Set budgets in "Category Settings" to see progress here.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ================= BOOK VIEW ================= -->
    <div id="view-book" class="view-section">
        <!-- EXACTLY SAME AS YOUR v7 -->
        <!-- (transactions, filters, dashboard, bottom actions) -->
    </div>

    <!-- ================= PROFILE VIEW ================= -->
    <div id="view-profile" class="view-section">
        <!-- SAME AS v7 -->
    </div>

    <!-- ================= TRANSACTION MODAL ================= -->
    <div id="transaction-modal" class="modal"></div>

    <!-- ================= REPORT MODAL ================= -->
    <div id="report-modal" class="modal"></div>

    <!-- ================= BUSINESS MODAL ================= -->
    <div id="business-modal" class="modal"></div>

    <!-- ================= CATEGORY MODAL ================= -->
    <div id="category-modal" class="modal"></div>

    <!-- ================= BOTTOM NAV ================= -->
    <nav class="bottom-nav">
        <div class="nav-item active" id="nav-cashbooks">
            <i class="fa-solid fa-book"></i>
            <span>Cashbooks</span>
        </div>
        <div class="nav-item" id="nav-settings">
            <i class="fa-solid fa-gear"></i>
            <span>Settings</span>
        </div>
    </nav>

</div>

<script src="script.js"></script>
</body>
</html>
